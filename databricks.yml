bundle:
  name: met_bundle

# 1. Global includes are back (this makes the YAMLs valid)
include:
  - resources/bootstrap/*.yml
  - resources/jobs/*.yml
  - resources/pipelines/*.yml

variables:
  catalog:
    default: "main_uc_dev"
  is_dev_mode:
    default: true

targets:
  dev:
    mode: development
    default: true
    sync:
      # Exclude the bootstrap logic so it doesn't create duplicate admin jobs
      exclude:
        - resources/bootstrap/*
    variables:
      is_dev_mode: true

  prod:
    mode: production
    sync:
      # Exclude the bootstrap logic
      exclude:
        - resources/bootstrap/*
    variables:
      catalog: main_uc_prod
      is_dev_mode: false

  bootstrap:
    mode: development
    sync:
      # THE KEY: Exclude the data jobs and pipelines 
      # This prevents the "(bootstrap)" duplicates in your UI
      exclude:
        - resources/jobs/*
        - resources/pipelines/*